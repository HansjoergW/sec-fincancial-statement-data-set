IS
--
main positions to calculate:

Revenues (Umsatzerlöse): us-gaap:Revenues
    Revenue kann negativ sein

    RevenueFromContractWithCustomerIncludingAssessedTax
    - ExciseAndSalesTaxes
    = RevenueFromContractWithCustomerExcludingAssessedTax


Cost of Goods Sold (Kosten der verkauften Waren): us-gaap:CostOfGoodsAndServicesSold

Gross Profit (Bruttogewinn): us-gaap:GrossProfit

Operating Expenses (Betriebsaufwendungen): us-gaap:OperatingExpenses

  Hierzu gehören verschiedene Unterkategorien wie:
    us-gaap:ResearchAndDevelopmentExpense
    us-gaap:SellingGeneralAndAdministrativeExpense

Operating Income (Betriebsergebnis): us-gaap:OperatingIncomeLoss

Other Income and Expenses (Sonstige Erträge und Aufwendungen): us-gaap:NonoperatingIncomeExpense

Income Before Tax (Ergebnis vor Steuern):us-gaap:IncomeLossFromContinuingOperationsBeforeIncomeTaxesExtraordinaryItemsNoncontrollingInterest

Income Tax Expense (Ertragsteueraufwand):us-gaap:IncomeTaxExpenseBenefit

Net Income (Nettogewinn): us-gaap:NetIncomeLoss


Earnings Per Share (Gewinn je Aktie): us-gaap:EarningsPerShareBasicAndDiluted

Comprehensive Income (Gesamtergebnis): us-gaap:ComprehensiveIncomeNetOfTax


ToDos
-----
- neben IncomeTaxExpenseBenefit gibt es auch  DeferredIncomeTaxExpenseBenefit.
  Eigentlich müsste man diese zusammennehmen und dese dann als "All weiterführen"

- NetIncomeLossAttributableToNoncontrollingInterest müsste eher zu
  IncomeLossFromContinuingOperations addiert subtrahiert werden, um NetIncomeLoss zu erhalten

  Zumindestens müsste man NetIncomeLossAttributableToNoncontrollingInterest auch beachten, wenn
  versucht wird das Vorzeichen von AllIncomeTaxExpenseBenefit zu korrigieren.

  0001140361-15-018544

  IncomeLossFromContinuingOperationsBeforeIncomeTaxesExtraordinaryItemsNoncontrollingInterest
  - DeferredIncomeTaxExpenseBenefit
  = ProfitLoss
  - NetIncomeLossAttributableToNoncontrollingInterest
  = NetIncomeLoss(tocommonstockholders)

  => Vorzeichen wird fälschlicherweise gedreht ! sollte aber nicht Regel schlägt zu...
     IncomeLossFromContinuingOperation ist falsch berechnet

    sieht aus, als würde NetIncomeLossAttributableToNoncontrollingInterest nicht korrekt verwendet
    -> müsste eigentlich von IncomeLossFromContinuingOperation addiert werden, nicht abgezogen,

    Fage: wäre es nicht besser, über profitLoss zu rechnen ?
    und zu schauenm, wiviele haben profitloss und  ein NetIncomeLossAvailableToCommonStockholdersBasic/NetIncLoss
    und was sind da für Tags dazwischen?


  Filtern wenn IncomLossBefore == NetIncomeLoss != ProfitLoss

- We mit missing IncomeTaxExpenseBenefit, bzw EBITDA umgeehen?
  standardized_bag.result_df[standardized_bag.result_df.IncomeLossBeforeIncomeTaxExpenseBenefit.isna() & standardized_bag.result_df.IncomeTaxExpenseBenefit.isna()]

  0001410578-21-000392 hat folgendes -> das könnte so ein zwischending sein, das auch auf
     IncomeLossBeforeIncomeTaxExpenseBenefit hindeutet

  ProfitLossIncludingRedeemableNonControllingInterest
  - NetIncomeLossAttributableToNonredeemableNoncontrollingInterest
  = NetIncomeLoss

- Prüfen der Vorzeichen, passt alles?
- definieren der Validation Rules
- EarningsPerShare?


- validation for income, ebitbefore taxes, taxes is only 62.4 percent

    0001007587-22-000019
    IncomeLossFromContinuingOperationsBeforeIncomeTaxesExtraordinaryItemsNoncontrollingInterest
    - IncomeTaxExpenseBenefit
    = IncomeLossFromContinuingOperations
    + IncomeLossFromDiscontinuedOperationsNetOfTaxAttributableToReportingEntity
    = NetIncomeLoss

    Problem: IncomeTaxExpenseBenefit bezieht sich nur auf continuingOperations
             Wenn aber noch Discontinued vorhanden, passt das nicht mehr mit NetIncomeLoss zusammen

             Entsprechend muss die Validierung anders sein.

             Continuing und Discontinued splitten


    mann müsste also Continuing und Discontinued trennen.


    0001140361-20-002341
    IncomeLossFromContinuingOperationsBeforeIncomeTaxesMinorityInterestAndIncomeLossFromEquityMethodInvestments
    + IncomeTaxExpenseBenefit
    = ProfitLoss
    + NetIncomeLossAttributableToNoncontrollingInterest
    = NetIncomeLoss




Revenue
-------
us-gaap:Revenues
  us-gaap:SalesRevenueNet
    us-gaap:ProductSalesRevenue
    us-gaap:ServiceRevenue


Cost of Revenue
----------------
- hint: wenn Revenue und GrossProfit vorhanden
  standardized_bag.result_df[standardized_bag.result_df.CostOfRevenue.isna() & ~standardized_bag.result_df.GrossProfit.isna() ]


Cost of Operating
----------------
- standardized_bag.result_df[standardized_bag.result_df.OperatingExpenses.isna() & ~standardized_bag.result_df.OperatingIncomeLoss.isna() ]
- idee:
   filter for reports with GrossProfit and OperatingIncomeLoss
   get all tags with line > GrossProfit.line and line < OperatingIncomeLoss.line
   -> sollte eine gute Liste ergeben, mit allem was Operating Cost sein kann.


Achtung:
- wir haben oft daten in IS und CI (comprehensive Income)
- prüfen, ob 10-Q immer Q? Einträge in fp hat und ob 10-K immer ein FY hat



Banks
----


Todos:
es gibt negative costOfRevenue Einträge

- 0001558370-23-014929 -> hier ist der Wert für NetIncomeLoss nicht getagged.
  könnte aus

  IncomeLossFromContinuingOperationsBeforeIncomeTaxesExtraordinaryItemsNoncontrollingInterest und
  IncomeTaxBenefitExpense berechnet werden:
   -> https://www.sec.gov/ix?doc=/Archives/edgar/data/1872356/000155837023014929/mkul-20230630x10q.htm



- Generell muss jeder Tag geprüft und korrigiert werden, für welchen klar ist, ob
  er einen positiven oder negativen Wert darstellt. Bzw. diese Tags müssen immer gleich behandelt werden
  auch im BS


- das CI müsste man eigentlich auch beachten.


     + SalesRevenueGoodsNet
     + SalesRevenueServicesNet
     + OtherSalesRevenueNet
     --------------
  or SalesRevenueNet

  or RevenuesSum
        RevenueFromContractWithCustomerExcludingAssessedTax
        RevenueFromContractWithCustomerIncludingAssessedTax
        RevenuesExcludingInterestAndDividends
        RegulatedAndUnregulatedOperatingRevenue
        ...

  or InterestAndDividendIncomeOperating
  --------
  Revenues
  ========


IncomeLossFromDiscontinuedOperationsNetOfTax
IncomeLossFromDiscontinuedOperationsNetOfTaxAttributableToNoncontrollingInterest
IncomeLossFromDiscontinuedOperationsNetOfTaxAttributableToReportingEntity

IncomeLossFromDiscontinuedOperationsNetOfTaxPerOutstandingGeneralPartnershipUnit1

IncomeLossFromDiscontinuedOperationsNetOfTaxPerOutstandingLimitedPartnershipAndGeneralPartnershipUnitBasic
IncomeLossFromDiscontinuedOperationsNetOfTaxPerOutstandingLimitedPartnershipAndGeneralPartnershipUnitBasicAndDiluted'
IncomeLossFromDiscontinuedOperationsNetOfTaxPerOutstandingLimitedPartnershipUnit
IncomeLossFromDiscontinuedOperationsNetOfTaxPerOutstandingLimitedPartnershipUnitDiluted
IncomeLossFromDiscontinuedOperationsNetOfTaxPerOutstandingLimitedPartnershipUnitBasic
IncomeLossFromDiscontinuedOperationsNetOfTaxPerOutstandingLimitedPartnershipUnitDiluted1

IncomeLossFromDiscontinuedOperationsNetOfTaxPerBasicShare
IncomeLossFromDiscontinuedOperationsNetOfTaxPerDilutedShare
IncomeLossFromDiscontinuedOperationsNetOfTaxPerBasicAndDilutedShare


NetIncomeLossFromDiscontinuedOperationsAvailableToCommonShareholdersBasic
NetIncomeLossFromDiscontinuedOperationsAvailableToCommonShareholdersDiluted







Sonstiges
---------
Falls Firmen nur die Resultate für Q2 und Q3 seit Beginn angeben, könnte man die Differenz für das einzelne Quartal
nachträglich berechnen. Wenn man beim Standardizer angeben könnte, ob qrtrs ein Bestandteil des Keys ist, könnte man diese auch direkt
berechnen und dann in einem Post Schritt das ganze cleanen, so, dass nur "einzelne Quarter" als Ergebnisse angezeigt werden.

Dazu müsste man eigentlich nur die adshs für Q2 und Q3 ermitteln, welche nur ein einziges Qrtr angeben. Von allen Q2 und Q3
werden dann diese abgezogen und es bleiben diejenigen übrig, die für Q2 und Q3 zwei, bzw. drei qrtr angeben.
dort kann man dann von Q2 Q1 abziehen und von Q3 das Ergebnis von Q2-Q1